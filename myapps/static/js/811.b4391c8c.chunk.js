"use strict";(self.webpackChunkapps=self.webpackChunkapps||[]).push([[811],{3631:function(e,n,a){a.r(n),a.d(n,{default:function(){return be}});var t=a(4165),s=a(5861),r=a(9439),i=a(1413),o=a(4358),l=a(3971),c=a(1694),d=a.n(c),u=a(7346),p=a.n(u),m=a(2791),h=a(2025),x=a(3360),f=a(2469),j=a(9743),v=a(2677),g=a(42),Z=a(7689),b=a(1087),w=a.p+"static/media/default.50b14dd03b88a6d9022a.png",y=a(5987),N=a(9410),k=a(5313),C=a(184),S=["label","type","name","value","readOnly","placeholder","register","errors","className","labelClassName","containerClass","refCallback","children"],_=function(e){var n=e.name,a=e.placeholder,t=e.refCallback,s=e.errors,o=e.register,l=e.className,c=e.value,u=e.readOnly,p=(0,m.useState)(!1),h=(0,r.Z)(p,2),x=h[0],f=h[1];return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(N.Z,{className:"mb-0",children:[(0,C.jsx)(k.Z.Control,(0,i.Z)((0,i.Z)({type:x?"text":"password",placeholder:a,name:n,id:n,as:"input",ref:function(e){t&&t(e)},className:l,isInvalid:!(!s||!s[n])},o?o(n):{}),{},{autoComplete:n,defaultValue:c,readOnly:u})),(0,C.jsx)("div",{className:d()("input-group-text","input-group-password",{"show-password":x}),"data-password":x?"true":"false",children:(0,C.jsx)("span",{className:"password-eye",onClick:function(){f(!x)}})})]})})},D=function(e){var n=e.label,a=e.type,t=e.name,s=e.value,r=e.readOnly,o=e.placeholder,l=e.register,c=e.errors,d=e.className,u=e.labelClassName,p=e.containerClass,m=e.refCallback,h=e.children,x=(0,y.Z)(e,S),f="textarea"===a?"textarea":"select"===a?"select":"input";return(0,C.jsx)(C.Fragment,{children:"hidden"===a?(0,C.jsx)("input",(0,i.Z)((0,i.Z)({type:a,name:t},l?l(t):{}),x)):(0,C.jsx)(C.Fragment,{children:"password"===a?(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(k.Z.Group,{className:p,children:[n?(0,C.jsxs)(C.Fragment,{children:[" ",(0,C.jsx)(k.Z.Label,{className:u,children:n})," ",h," "]}):null,(0,C.jsx)(_,{name:t,placeholder:o,refCallback:m,errors:c,register:l,className:d,value:s,readOnly:r}),c&&c[t]?(0,C.jsx)(k.Z.Control.Feedback,{type:"invalid",className:"d-block",children:c[t].message}):null]})}):(0,C.jsx)(C.Fragment,{children:"select"===a?(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(k.Z.Group,{className:p,children:[n?(0,C.jsx)(k.Z.Label,{className:u,children:n}):null,(0,C.jsx)(k.Z.Select,(0,i.Z)((0,i.Z)((0,i.Z)({type:a,label:n,name:t,id:t,ref:function(e){m&&m(e)},comp:f,className:d,isInvalid:!(!c||!c[t])},l?l(t):{}),x),{},{children:h})),c&&c[t]?(0,C.jsx)(k.Z.Control.Feedback,{type:"invalid",children:c[t].message}):null]})}):(0,C.jsx)(C.Fragment,{children:"checkbox"===a||"radio"===a?(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(k.Z.Group,{className:p,children:[(0,C.jsx)(k.Z.Check,(0,i.Z)((0,i.Z)({type:a,label:n,name:t,id:t,ref:function(e){m&&m(e)},className:d,isInvalid:!(!c||!c[t])},l?l(t):{}),x)),c&&c[t]?(0,C.jsx)(k.Z.Control.Feedback,{type:"invalid",children:c[t].message}):null]})}):(0,C.jsxs)(k.Z.Group,{className:p,children:[n?(0,C.jsx)(k.Z.Label,{className:u,children:n}):null,(0,C.jsx)(k.Z.Control,(0,i.Z)((0,i.Z)((0,i.Z)({type:a,placeholder:o,value:s,name:t,id:t,as:f,ref:function(e){m&&m(e)},className:d,isInvalid:!(!c||!c[t])},l?l(t):{}),x),{},{autoComplete:t,children:h||null})),c&&c[t]?(0,C.jsx)(k.Z.Control.Feedback,{type:"invalid",children:c[t].message}):null]})})})})})},E=a(4942),I=function(e){var n=e.children||null,a=e.tag||"div",t=e.color||"secondary",s=e.size||"";return(0,C.jsx)(a,{role:"status",className:d()({"spinner-border":"bordered"===e.type,"spinner-grow":"grow"===e.type},["text-".concat(t)],(0,E.Z)({},"avatar-".concat(s),s),e.className),children:n})};I.defaultProps={tag:"div",type:"bordered"};var A,F=I,R=a(3144),B=a(5671),O=(0,R.Z)((function e(){var n=this;(0,B.Z)(this,e),this.getIp=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A||p().spawn(["docker","inspect","-f","{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}","websoft9-appmanage"]).then((function(e){A=e.trim()})).catch((function(e){throw new Error("Docker command failed: ".concat(e))})),e.abrupt("return",A);case 2:case"end":return e.stop()}}),e)}))),this.get=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(a,s){var r,i,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getIp();case 2:return r=i=p().http({address:A,port:5e3}),s?(o=s?Object.keys(s).map((function(e){return e+"="+s[e]})).join("&"):"",i=r.get("".concat(a,"?").concat(o),s)):i=r.get("".concat(a),s),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}()})),P=new O;function H(e){return P.get("".concat("/AppList"),e)}function z(e){return P.get("".concat("/AppUninstall"),e)}function M(e){return P.get("".concat("/AppStop"),e)}function J(e){return P.get("".concat("/AppStart"),e)}function V(e){return P.get("".concat("/AppRestart"),e)}function T(e){return P.get("".concat("/AppDomainAdd"),e)}var U=a(1243),L=a(7798),W=a(2576),G=a(1752),$=a(4533),q=a(3433),K=a(1131),Q=a(1473),X=a(3721),Y=a(5818),ee=a(1123),ne=a(9627),ae=a(5736),te=p().gettext,se=m.forwardRef((function(e,n){return(0,C.jsx)(o.Z,(0,i.Z)({elevation:6,ref:n,variant:"filled"},e))})),re=function(e){var n=(0,Z.s0)(),a=(0,m.useState)(!1),i=(0,r.Z)(a,2),o=i[0],l=i[1],c=(0,m.useState)(!1),u=(0,r.Z)(c,2),p=u[0],j=u[1],v=(0,m.useState)(""),g=(0,r.Z)(v,2),b=g[0],w=g[1];return(0,C.jsxs)(h.Z,{show:e.showConform,onHide:e.onClose,size:"lg",scrollable:"true",backdrop:"static",style:{backgroundColor:"rgba(0,0,0,0.8)"},children:[(0,C.jsx)(h.Z.Header,{onHide:e.onClose,className:d()("modal-colored-header","bg-warning"),children:(0,C.jsx)("h4",{children:te("Delete domain binding")})}),(0,C.jsxs)(h.Z.Body,{className:"row",children:[(0,C.jsxs)("span",{style:{margin:"10px 0px"},children:[te("Are you sure you want to delete the domain for:")," ",e.deleteRowData.domainValue," ? "]}),(0,C.jsx)("div",{children:p&&(0,C.jsx)(f.Z,{variant:"danger",className:"my-2",children:b})})]}),(0,C.jsxs)(h.Z.Footer,{children:[(0,C.jsx)(x.Z,{variant:"light",onClick:e.onClose,children:te("Close")})," ",(0,C.jsxs)(x.Z,{disabled:o,variant:"warning",onClick:(0,s.Z)((0,t.Z)().mark((function a(){return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{l(!0),(t={app_id:e.deleteRowData.app_id,domain:e.deleteRowData.domainValue},P.get("".concat("/AppDomainDelete"),t)).then((function(n){(n=JSON.parse(n)).Error?(j(!0),w(n.Error.Message)):(l(!1),e.onClose(),e.onDataChange())}))}catch(s){n("/error-500")}finally{l(!1)}case 1:case"end":return a.stop()}var t}),a)}))),children:[o&&(0,C.jsx)(F,{className:"spinner-border-sm me-1",tag:"span",color:"white"})," ",te("Delete")]})]})]})},ie=function(e){var n,a,i,o,c,d,u,h,f,g,b,w,y,N,S,_,E,I,A,F,R,B,O,H,z,M,J,V,U,L=(0,Z.s0)(),W=(0,m.useState)([]),G=(0,r.Z)(W,2),$=G[0],ie=G[1],oe=(0,m.useState)(!1),le=(0,r.Z)(oe,2),ce=le[0],de=le[1],ue=(0,m.useState)(!1),pe=(0,r.Z)(ue,2),me=pe[0],he=pe[1],xe=(0,m.useState)(""),fe=(0,r.Z)(xe,2),je=fe[0],ve=fe[1],ge=(0,m.useState)(""),Ze=(0,r.Z)(ge,2),be=Ze[0],we=Ze[1],ye=(0,m.useState)(!1),Ne=(0,r.Z)(ye,2),ke=Ne[0],Ce=Ne[1],Se=(0,m.useState)(null),_e=(0,r.Z)(Se,2),De=_e[0],Ee=_e[1],Ie=(0,m.useState)(""),Ae=(0,r.Z)(Ie,2),Fe=(Ae[0],Ae[1],m.useState(!0)),Re=(0,r.Z)(Fe,2),Be=Re[0],Oe=(Re[1],m.useState(!0)),Pe=(0,r.Z)(Oe,2),He=Pe[0],ze=Pe[1],Me=m.useState(!1),Je=(0,r.Z)(Me,2),Ve=Je[0],Te=Je[1],Ue=function(){var n=(0,s.Z)((0,t.Z)().mark((function n(){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(a={app_id:e.data.app_id},P.get("".concat("/AppDomainList"),a)).then((function(n){if((n=JSON.parse(n)).Error)he(!0),we("error"),ve(n.Error.Message);else{var a=n.ResponseData.Domain_set,t=a.default_domain,s=a.domains.map((function(n){return{app_id:e.data.app_id,domainValue:n,newDomainValue:n,isEditable:!1,isFromAPI:!0,isDefaultDomain:n===t}}));s.sort((function(e,n){return n.isDefaultDomain-e.isDefaultDomain})),ie(s)}}));case 3:n.next=9;break;case 5:n.prev=5,n.t0=n.catch(0),console.log(n.t0),L("/error-500");case 9:case"end":return n.stop()}var a}),n,null,[[0,5]])})));return function(){return n.apply(this,arguments)}}();(0,m.useEffect)((function(){Ue()}),[]);var Le=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n,a){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.isFromAPI?(Ce(!0),Ee(n)):((s=(0,q.Z)($)).splice(a,1),ie(s));case 1:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}(),We=function(){var n=(0,s.Z)((0,t.Z)().mark((function n(a){var s;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=$[a].newDomainValue,de(!0);try{(t={app_id:e.data.app_id,domain:s},P.get("".concat("/AppDomainSet"),t)).then((function(e){(e=JSON.parse(e)).Error?(he(!0),we("error"),ve(e.Error.Message)):(he(!0),we("success"),ve(te("Success")),Ue())}))}catch(r){L("/error-500")}finally{de(!1)}case 3:case"end":return n.stop()}var t}),n)})));return function(e){return n.apply(this,arguments)}}(),Ge=function(){var n=(0,s.Z)((0,t.Z)().mark((function n(a,s){var r,i,o,l;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=document.getElementsByName("domain-".concat(s))[0],i=r.value,o=/^(?!https?:\/\/)([\da-z\.-]+\.)*([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,i)if(o.test(i))if(a.isFromAPI)if(a.domainValue!=a.newDomainValue){de(!0);try{(t={app_id:e.data.app_id,domain_old:a.domainValue,domain_new:i},P.get("".concat("/AppDomainUpdate"),t)).then((function(e){(e=JSON.parse(e)).Error?(he(!0),we("error"),ve(e.Error.Message)):(he(!0),we("success"),ve(te("Success")),Ue())}))}catch(c){L("/error-500")}finally{de(!1)}}else(l=(0,q.Z)($))[s].isEditable=!l[s].isEditable,ie(l);else try{de(!0),T({app_id:e.data.app_id,domains:i}).then((function(e){(e=JSON.parse(e)).Error?(he(!0),we("error"),ve(e.Error.Message)):(he(!0),we("success"),ve(te("Success")),Ue())}))}catch(c){L("/error-500")}finally{de(!1)}else he(!0),we("error"),ve(te("Please enter the correct domain name and cannot start with http or https!"));else he(!0),we("error"),ve(te("Domain name cannot be empty"));case 4:case"end":return n.stop()}var t}),n)})));return function(e,a){return n.apply(this,arguments)}}();var $e=function(e,n){"clickaway"!==n&&(he(!1),ve(""))},qe=(0,m.useState)(!1),Ke=(0,r.Z)(qe,2);Ke[0],Ke[1];return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(ne.Z,{children:[ce&&(0,C.jsx)("div",{className:"card-disabled",style:{zIndex:999},children:(0,C.jsx)("div",{className:"card-portlets-loader"})}),(0,C.jsxs)(ne.Z.Body,{children:[(0,C.jsxs)(Q.Z,{expanded:!0,className:"mb-2",children:[(0,C.jsx)(Y.Z,{expandIcon:(0,C.jsx)(K.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,C.jsxs)(ee.Z,{children:[(0,C.jsx)("label",{className:"me-2 fs-5 d-block",children:te("Domain Access")}),(0,C.jsxs)("span",{className:"me-2 fs-6",style:{display:Be?"inline":"none"},children:[te("Access the domain name for better application performance, https and custom configuration can click")," ",(0,C.jsx)("a",{href:"#",onClick:function(e){e.preventDefault();p().file("/etc/hostname").watch((function(e){console.log(e)})),p().jump("nginx#/nginxproxymanager/nginx/proxy")},children:te("more")})]})]})}),(0,C.jsx)(X.Z,{children:(0,C.jsx)(ee.Z,{children:(0,C.jsxs)(ne.Z,{children:[(0,C.jsx)(ne.Z.Header,{children:(0,C.jsx)(j.Z,{className:"mb-2 align-items-center",children:(0,C.jsxs)(v.Z,{xs:12,md:12,className:"d-flex justify-content-end",children:[(0,C.jsx)(x.Z,{variant:"primary",size:"sm",className:"me-2",onClick:function(){$.length<10&&ie([].concat((0,q.Z)($),[{app_id:e.data.app_id,domainValue:"",newDomainValue:"",isEditable:!0,isFromAPI:!1,isDefaultDomain:!1}]))},children:te("Add Domain")}),(null===(n=e.data)||void 0===n||null===(a=n.config)||void 0===a?void 0:a.admin_domain_url)&&(0,C.jsx)("a",{href:null===(i=e.data)||void 0===i||null===(o=i.config)||void 0===o?void 0:o.admin_domain_url,target:"_blank",className:"me-2",children:(0,C.jsx)(x.Z,{variant:"primary",size:"sm",children:te("Admin Page")})}),(0,C.jsxs)(x.Z,{size:"sm",className:"me-2",variant:"primary",onClick:(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de(!0),e.next=3,Ue();case 3:de(!1);case 4:case"end":return e.stop()}}),e)}))),children:[" ",te("Refresh")]})]})})}),(0,C.jsx)(ne.Z.Body,{children:$.map((function(e,n){return(0,C.jsx)(j.Z,{className:"mb-2",children:(0,C.jsxs)(v.Z,{xs:12,className:"d-flex justify-content-between",children:[(0,C.jsx)(v.Z,{children:(0,C.jsx)(D,{className:"mb-2 mb-md-0",type:"text",name:"domain-".concat(n),value:e.newDomainValue,disabled:!e.isEditable,onChange:function(e){return function(e,n){var a=(0,q.Z)($);a[e].newDomainValue=n.target.value,ie(a)}(n,e)}})}),(0,C.jsxs)(v.Z,{className:"col-auto ms-auto",children:[(0,C.jsx)(x.Z,{variant:"link text-danger",style:{padding:"5px"},onClick:function(){return Le(e,n)},children:te("delete")}),e.isEditable&&e.isFromAPI&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.Z,{variant:"link text-success",style:{padding:"5px"},onClick:function(){return Ge(e,n)},children:te("save")}),(0,C.jsx)(x.Z,{variant:"link text-success",style:{padding:"5px"},onClick:function(){return function(e){var n=(0,q.Z)($);n[e].newDomainValue=n[e].domainValue,n[e].isEditable=!n[e].isEditable,ie(n)}(n)},children:te("cancel")})]}),e.isEditable&&!e.isFromAPI&&(0,C.jsx)(x.Z,{variant:"link text-success",style:{padding:"5px"},onClick:function(){return Ge(e,n)},children:te("save")}),!e.isEditable&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.Z,{variant:"link text-primary",style:{padding:"5px"},onClick:function(){return function(e){var n=(0,q.Z)($);n[e].isEditable=!n[e].isEditable,ie(n)}(n)},children:te("edit")}),(0,C.jsx)("a",{href:"http://"+e.domainValue,target:"_blank",children:(0,C.jsx)(x.Z,{variant:"link text-primary",style:{padding:"5px"},children:te("access")})}),e.isDefaultDomain?(0,C.jsxs)(ae.Z,{className:"ms-2 bg-success",children:[" ",te("default")," "]}):(0,C.jsx)(x.Z,{variant:"link text-primary",onClick:function(){return We(n)},children:te("set as default")})]})]})]})},n)}))})]})})})]}),(null===(c=e.data)||void 0===c||null===(d=c.config)||void 0===d?void 0:d.url)&&((null===(u=e.data)||void 0===u||null===(h=u.config)||void 0===h?void 0:h.default_domain)&&!(null!==(f=e.data)&&void 0!==f&&f.app_replace_url)||!(null!==(g=e.data)&&void 0!==g&&null!==(b=g.config)&&void 0!==b&&b.default_domain))&&(0,C.jsxs)(Q.Z,{defaultExpanded:!0,onChange:function(e,n){ze(n)},className:"mb-2",children:[(0,C.jsx)(Y.Z,{expandIcon:(0,C.jsx)(K.Z,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:(0,C.jsxs)(ee.Z,{children:[(0,C.jsx)("label",{className:"me-2 fs-5 d-block",children:te("No Domain Access")}),(0,C.jsx)("span",{className:"me-2 fs-6",style:{display:He?"inline":"none"},children:te("No domain name can temporarily access the application by IP + port")})]})}),(0,C.jsx)(X.Z,{children:(0,C.jsx)(ee.Z,{children:(0,C.jsx)(ne.Z,{children:(0,C.jsxs)(ne.Z.Body,{children:[(null===(w=e.data)||void 0===w||null===(y=w.config)||void 0===y?void 0:y.url)&&(0,C.jsxs)("div",{children:[(0,C.jsxs)("label",{className:"me-2 fs-5",children:[te("Front End"),":"]}),(0,C.jsx)("a",{href:null===(N=e.data)||void 0===N||null===(S=N.config)||void 0===S?void 0:S.url,target:"_blank",className:"me-2",children:null===(_=e.data)||void 0===_||null===(E=_.config)||void 0===E?void 0:E.url})]}),(null===(I=e.data)||void 0===I||null===(A=I.config)||void 0===A?void 0:A.admin_url)&&(0,C.jsxs)("div",{children:[(0,C.jsxs)("label",{className:"me-2 fs-5",children:[te("Back End"),":"]}),(0,C.jsx)("a",{href:null===(F=e.data)||void 0===F||null===(R=F.config)||void 0===R?void 0:R.admin_url,target:"_blank",className:"me-2",children:null===(B=e.data)||void 0===B||null===(O=B.config)||void 0===O?void 0:O.admin_url})]})]})})})})]}),(null===(H=e.data)||void 0===H||null===(z=H.config)||void 0===z?void 0:z.admin_username)&&(0,C.jsxs)(Q.Z,{className:"mb-2",onChange:function(e,n){Te(n)},children:[(0,C.jsx)(Y.Z,{expandIcon:(0,C.jsx)(K.Z,{}),"aria-controls":"panel3a-content",id:"panel3a-header",children:(0,C.jsxs)(ee.Z,{children:[(0,C.jsx)("label",{className:"me-2 fs-5 d-block",children:te("Initial Account")}),(0,C.jsx)("span",{className:"me-2 fs-6",style:{display:Ve?"inline":"none"},children:te("This application is pre-configured with an administrator account, please change the administrator password immediately. The initial credentials are:")})]})}),(0,C.jsx)(X.Z,{children:(0,C.jsx)(ee.Z,{children:(0,C.jsx)(ne.Z,{children:(0,C.jsxs)(ne.Z.Body,{children:[(0,C.jsxs)(k.Z.Group,{as:j.Z,className:"mb-3",children:[(0,C.jsx)(k.Z.Label,{htmlFor:"username",column:!0,md:2,className:"fs-5",children:te("UserName")}),(0,C.jsx)(v.Z,{md:4,children:(0,C.jsx)(k.Z.Control,{type:"text",name:"username",id:"username",defaultValue:null===(M=e.data)||void 0===M||null===(J=M.config)||void 0===J?void 0:J.admin_username,readOnly:!0})})]}),(0,C.jsxs)(k.Z.Group,{as:j.Z,className:"mb-3",children:[(0,C.jsx)(k.Z.Label,{htmlFor:"password",column:!0,md:2,className:"fs-5",children:te("Password")}),(0,C.jsx)(v.Z,{md:4,children:(0,C.jsx)(D,{type:"password",name:"password",containerClass:"mb-3",value:null===(V=e.data)||void 0===V||null===(U=V.config)||void 0===U?void 0:U.admin_password,readOnly:!0})})]})]})})})})]})]})]}),ke&&(0,C.jsx)(re,{showConform:ke,onClose:function(){Ce(!1)},deleteRowData:De,onDataChange:Ue}),me&&(0,C.jsx)(l.Z,{open:me,autoHideDuration:5e3,onClose:$e,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,C.jsx)(se,{onClose:$e,severity:be,sx:{width:"100%"},children:je})})]})},oe=a(2591),le=p().gettext,ce=function(e){(0,Z.s0)();var n=e.containersInfo,a=e.customer_name,t=e.endpointsId;return(0,C.jsx)(j.Z,{children:(0,C.jsx)(v.Z,{xs:12,children:(0,C.jsxs)(ne.Z,{children:[(0,C.jsx)(ne.Z.Header,{children:(0,C.jsxs)(j.Z,{className:"align-items-center",children:[(0,C.jsxs)(v.Z,{xs:12,md:10,children:[(0,C.jsx)("label",{className:"me-2 fs-5 d-block",children:le("Container")}),(0,C.jsx)("span",{className:"me-2 fs-6",children:p().format(le("This application consists of the following containers, and the one named $0 is the main container."),a)})]}),(0,C.jsx)(v.Z,{xs:12,md:2,children:(0,C.jsx)(x.Z,{variant:"primary",size:"sm",className:"float-end me-2",onClick:function(){var e="container#/portainer/#!/".concat(t,"/docker/stacks/").concat(a,"?type=2&regular=false&external=true&orphaned=false");p().file("/etc/hostname").watch((function(e){console.log(e)})),p().jump(e)},children:le("More")})})]})}),(0,C.jsx)(ne.Z.Body,{children:(0,C.jsxs)(oe.Z,{className:"mb-0",children:[(0,C.jsx)("thead",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{children:le("Name")}),(0,C.jsx)("th",{children:le("State")}),(0,C.jsx)("th",{style:{textAlign:"center"},children:le("Actions")}),(0,C.jsx)("th",{children:le("Image")}),(0,C.jsx)("th",{children:le("Created")}),(0,C.jsx)("th",{children:le("Ip Address")}),(0,C.jsx)("th",{children:le("Published Ports")})]})}),(0,C.jsx)("tbody",{children:n.map((function(e,n){var a,s,r,i,o;return(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:null===(a=e.Names)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.replace(/^\/|\/$/g,"")}),(0,C.jsx)("td",{children:(0,C.jsx)(ae.Z,{className:"".concat("running"===e.State?"bg-success":"exited"===e.State?"bg-danger":"info"),children:e.State})}),(0,C.jsxs)("td",{style:{textAlign:"center"},children:[(0,C.jsxs)("a",{href:"#",onClick:function(n){n.preventDefault();var a="container#/portainer/#!/".concat(t,"/docker/containers/").concat(e.Id,"/logs");p().file("/etc/hostname").watch((function(e){console.log(e)})),p().jump(a)},title:"Logs",children:[(0,C.jsx)("i",{className:"dripicons-document-remove noti-icon"})," "]}),"running"===e.State&&(0,C.jsxs)("a",{href:"#",onClick:function(n){n.preventDefault();var a="container#/portainer/#!/".concat(t,"/docker/containers/").concat(e.Id,"/stats");p().file("/etc/hostname").watch((function(e){console.log(e)})),p().jump(a)},title:"Stats",children:[(0,C.jsx)("i",{className:"dripicons-graph-bar noti-icon"})," "]}),"running"===e.State&&(0,C.jsxs)("a",{href:"#",onClick:function(n){n.preventDefault();var a="container#/portainer/#!/".concat(t,"/docker/containers/").concat(e.Id,"/exec");p().file("/etc/hostname").watch((function(e){console.log(e)})),p().jump(a)},title:"Exec Console",children:[(0,C.jsx)("i",{className:"dripicons-code noti-icon"})," "]})]}),(0,C.jsx)("td",{children:(0,C.jsx)(L.Z,{placement:"bottom",overlay:(0,C.jsx)(W.Z,{id:"tooltip-bottom",children:e.Image}),children:(0,C.jsx)("div",{children:(null===(r=e.Image)||void 0===r?void 0:r.length)>20?e.Image.substring(0,20)+"...":e.Image})},"bottom1")}),(0,C.jsx)("td",{children:new Date(1e3*e.Created).toLocaleString()}),(0,C.jsx)("td",{children:e.NetworkSettings.Networks.websoft9.IPAddress}),(0,C.jsxs)("td",{children:[null===(i=e.Ports.find((function(e){return e.IP&&/^(\d{1,3}\.){3}\d{1,3}$/.test(e.IP)})))||void 0===i?void 0:i.PublicPort,":",null===(o=e.Ports.find((function(e){return e.IP&&/^(\d{1,3}\.){3}\d{1,3}$/.test(e.IP)})))||void 0===o?void 0:o.PrivatePort]})]},n)}))})]})})]})})})},de=p().gettext,ue=function(e){var n,a,t,s,r,i,o;return(0,C.jsx)(j.Z,{children:(0,C.jsx)(v.Z,{xs:12,children:(0,C.jsxs)(ne.Z,{children:[(0,C.jsx)(ne.Z.Header,{children:(0,C.jsx)("label",{className:"me-2 fs-5 d-block",children:de("App Overview")})}),(0,C.jsx)(ne.Z.Body,{children:(0,C.jsx)(oe.Z,{responsive:!0,className:"mb-0",bordered:!1,style:{display:"flex"},children:(0,C.jsxs)("tbody",{children:[(0,C.jsxs)("tr",{children:[(0,C.jsxs)("td",{style:{fontWeight:"bold"},children:[de("App Name"),":"]}),(0,C.jsx)("td",{children:null===(n=e.data)||void 0===n?void 0:n.app_name})]}),(0,C.jsxs)("tr",{children:[(0,C.jsxs)("td",{style:{fontWeight:"bold"},children:[de("App Version"),":"]}),(0,C.jsx)("td",{children:null===(a=e.data)||void 0===a?void 0:a.app_version})]}),(0,C.jsxs)("tr",{children:[(0,C.jsxs)("td",{style:{fontWeight:"bold"},children:[de("App Port"),":"]}),(0,C.jsx)("td",{children:null===(t=e.data)||void 0===t||null===(s=t.config)||void 0===s?void 0:s.port})]}),(0,C.jsxs)("tr",{children:[(0,C.jsxs)("td",{style:{fontWeight:"bold"},children:[de("Created Time"),":"]}),(0,C.jsx)("td",{children:null===(r=e.data)||void 0===r?void 0:r.create_time})]}),(0,C.jsxs)("tr",{children:[(0,C.jsxs)("td",{style:{fontWeight:"bold"},children:[de("Config Path"),":"]}),(0,C.jsx)("td",{children:null===(i=e.data)||void 0===i?void 0:i.config_path})]}),(0,C.jsxs)("tr",{children:[(0,C.jsxs)("td",{style:{fontWeight:"bold"},children:[de("Data Path"),":"]}),(0,C.jsx)("td",{children:null===(o=e.data)||void 0===o?void 0:o.volume_data})]})]})})})]})})})},pe=p().gettext,me=function(e){var n=(0,Z.s0)(),a=(0,m.useState)(!1),i=(0,r.Z)(a,2),o=i[0],l=i[1],c=(0,m.useState)(!1),u=(0,r.Z)(c,2),p=u[0],j=u[1],v=(0,m.useState)(""),g=(0,r.Z)(v,2),b=g[0],w=g[1];return(0,C.jsxs)(h.Z,{show:e.showConform,onHide:e.onClose,size:"lg",scrollable:"true",backdrop:"static",style:{backgroundColor:"rgba(0,0,0,0.8)"},children:[(0,C.jsx)(h.Z.Header,{onHide:e.onClose,closeButton:!0,className:d()("modal-colored-header","bg-warning"),children:(0,C.jsxs)("h4",{children:[pe("Uninstall")," ",e.app.customer_name]})}),(0,C.jsxs)(h.Z.Body,{className:"row",children:[(0,C.jsxs)("span",{style:{margin:"10px 0px"},children:[pe("This will immediately uninstall")," ",e.app.customer_name," ",pe("and remove all its data.")]}),(0,C.jsx)("div",{children:p&&(0,C.jsx)(f.Z,{variant:"danger",className:"my-2",children:b})})]}),(0,C.jsxs)(h.Z.Footer,{children:[(0,C.jsx)(x.Z,{variant:"light",onClick:e.onClose,children:pe("Close")})," ",(0,C.jsxs)(x.Z,{disabled:o,variant:"warning",onClick:(0,s.Z)((0,t.Z)().mark((function a(){var s;return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l(!0),a.next=4,z({app_id:e.app.app_id});case 4:s=a.sent,(s=JSON.parse(s)).Error?(j(!0),w(s.Error.Message)):(e.onClose(),e.onCloseFatherModal(),e.onDataChange()),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n("/error-500");case 12:case"end":return a.stop()}}),a,null,[[0,9]])}))),children:[o&&(0,C.jsx)(F,{className:"spinner-border-sm me-1",tag:"span",color:"white"})," ",pe("Uninstall")]})]})]})},he=(0,m.forwardRef)((function(e,n){var a=(0,m.useState)(!1),i=(0,r.Z)(a,2),o=i[0],l=i[1],c=(0,m.useState)(!1),d=(0,r.Z)(c,2),u=d[0],p=d[1],h=(0,Z.s0)(),f=function(){p(!0)},g=function(){p(!1)};return(0,m.useImperativeHandle)(n,(function(){return{setButtonDisable:f,setButtonEnable:g}})),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j.Z,{className:"mb-2",children:(0,C.jsxs)(v.Z,{sm:12,children:[(0,C.jsx)("label",{className:"me-1",style:{fontWeight:"bolder",marginBottom:"5px"},children:pe("Start / Stop")}),(0,C.jsx)("p",{children:pe("Apps can be stopped to conserve server resources instead of uninstalling.")}),"running"===e.data.status?(0,C.jsxs)(x.Z,{variant:"secondary",className:"float-end",disabled:u,onClick:(0,s.Z)((0,t.Z)().mark((function n(){var a;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.disabledButton(),p(!0),n.next=5,M({app_id:e.data.app_id});case 5:a=n.sent,(a=JSON.parse(a)).Error?h("/error"):e.onDataChange(e.data.app_id),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),h("/error-500");case 13:return n.prev=13,p(!1),e.enableButton(),n.finish(13);case 17:case"end":return n.stop()}}),n,null,[[0,10,13,17]])}))),children:[u&&(0,C.jsx)(F,{className:"spinner-border-sm me-1",tag:"span",color:"white"})," ",pe("Stop")]}):(0,C.jsxs)(x.Z,{variant:"primary",className:"float-end",disabled:u,onClick:(0,s.Z)((0,t.Z)().mark((function n(){var a;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.disabledButton(),p(!0),n.prev=2,n.next=5,J({app_id:e.data.app_id});case 5:a=n.sent,(a=JSON.parse(a)).Error?h("/error"):e.onDataChange(e.data.app_id),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),h("/error-500");case 13:return n.prev=13,e.enableButton(),p(!1),n.finish(13);case 17:case"end":return n.stop()}}),n,null,[[2,10,13,17]])}))),children:[u&&(0,C.jsx)(F,{className:"spinner-border-sm me-1",tag:"span",color:"white"})," ",pe("Start")]})]})}),(0,C.jsx)("hr",{}),(0,C.jsx)(j.Z,{className:"mb-2",children:(0,C.jsxs)(v.Z,{sm:12,children:[(0,C.jsx)("label",{className:"me-1",style:{fontWeight:"bolder",marginBottom:"5px"},children:pe("Uninstall")}),(0,C.jsx)("p",{children:pe("This will uninstall the app immediately and remove all its data.The app will be inaccessible.")}),(0,C.jsx)(x.Z,{variant:"warning",className:"float-end",onClick:function(){l(!0)},children:pe("Uninstall")})]})}),o&&(0,C.jsx)(me,{showConform:o,onClose:function(){l(!1)},app:e.data,onDataChange:e.onDataChange,onCloseFatherModal:e.onCloseFatherModal})]})})),xe=p().gettext,fe=function(e){var n=(0,m.useState)(!1),a=(0,r.Z)(n,2),i=a[0],o=a[1],l=(0,m.useState)(!1),c=(0,r.Z)(l,2),u=c[0],p=c[1],f=(0,m.useState)(e.current_app),g=(0,r.Z)(f,2),y=g[0],N=g[1],k=(0,m.useState)(!1),S=(0,r.Z)(k,2),_=S[0],D=S[1],E=(0,m.useState)(!1),I=(0,r.Z)(E,2),A=I[0],R=I[1],B=(0,m.useState)(!1),O=(0,r.Z)(B,2),H=O[0],z=O[1],T=(0,Z.s0)(),q=(0,m.useRef)(),K=(0,m.useState)([]),Q=(0,r.Z)(K,2),X=Q[0],Y=Q[1],ee=e.current_app.customer_name,ne=(0,m.useState)(null),ae=(0,r.Z)(ne,2),te=ae[0],se=ae[1],re=(0,m.useState)(null),oe=(0,r.Z)(re,2),le=(oe[0],oe[1]),de=(0,m.useState)(!1),pe=(0,r.Z)(de,2),me=(pe[0],pe[1],(0,m.useState)("")),fe=(0,r.Z)(me,2),je=(fe[0],fe[1],(0,m.useState)("")),ve=(0,r.Z)(je,2),ge=(ve[0],ve[1],window.location.protocol),Ze=window.location.host,be=ge+"//"+(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/.test(Ze)?Ze.split(":")[0]:Ze),we=(0,m.useState)(null),ye=(0,r.Z)(we,2),Ne=(ye[0],ye[1]),ke=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,a,s,r,i,o,l,c,d,u,p,m,h;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.localStorage.getItem("portainer.JWT"),a=null,null!==n){e.next=21;break}return e.next=6,t={plugin_name:"portainer"},P.get("".concat("/AppSearchUsers"),t);case 6:if(s=e.sent,!(s=JSON.parse(s)).Error){e.next=12;break}throw new Error("Request portainer user info failed.");case 12:return e.next=14,U.Z.post(be+"/portainer/api/auth",{username:null===(r=s.ResponseData.user)||void 0===r?void 0:r.user_name,password:null===(i=s.ResponseData.user)||void 0===i?void 0:i.password});case 14:if(200!==(o=e.sent).status){e.next=20;break}n='"'+o.data.jwt+'"',window.localStorage.setItem("portainer.JWT",n),e.next=21;break;case 20:throw new Error("Request portainer tokens failed.");case 21:return Ne(n.replace(/"/g,"")),e.next=24,U.Z.get(be+"/portainer/api/endpoints",{headers:{Authorization:"Bearer "+n.replace(/"/g,"")}});case 24:if(200!==(l=e.sent).status){e.next=53;break}if(0!=l.data.length){e.next=38;break}return e.next=29,U.Z.post(be+"/portainer/api/endpoints",{},{params:{Name:"local",EndpointCreationType:1},headers:{Authorization:"Bearer "+n.replace(/"/g,"")}});case 29:if(200!==(c=e.sent).status){e.next=35;break}a=null===(d=c.data)||void 0===d?void 0:d.Id,se(a),e.next=36;break;case 35:throw new Error("Request portainer addEndpoint failed.");case 36:e.next=40;break;case 38:a=l.data.find((function(e){return e.URL.includes("/var/run/docker.sock")})).Id,se(a);case 40:return e.next=42,U.Z.get(be+"/portainer/api/endpoints/".concat(a,"/docker/containers/json"),{headers:{Authorization:"Bearer "+n.replace(/"/g,"")},params:{all:!0,filters:JSON.stringify({label:["com.docker.compose.project=".concat(ee)]})}});case 42:if(200!==(u=e.sent).status){e.next=50;break}m=u.data,h=null===(p=m.find((function(e){var n,a;return(null===(n=e.Names)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.replace(/^\/|\/$/g,""))===ee})))||void 0===p?void 0:p.Id,le(h),Y(m),e.next=51;break;case 50:throw new Error("Request portainer containersData failed.");case 51:e.next=54;break;case 53:throw new Error("Request portainer endpointsData failed.");case 54:e.next=59;break;case 56:e.prev=56,e.t0=e.catch(0),console.log(e.t0);case 59:case"end":return e.stop()}var t}),e,null,[[0,56]])})));return function(){return e.apply(this,arguments)}}(),Ce=function(){q.current.setButtonDisable()},Se=function(){q.current.setButtonEnable()};(0,m.useEffect)((function(){N(e.current_app)}),[e.current_app]),(0,m.useEffect)((function(){ke()}),[]);var _e=[{id:"1",title:xe("Overview"),icon:"mdi dripicons-home",text:(0,C.jsx)(ue,{data:y})},{id:"2",title:xe("Access"),icon:"mdi dripicons-web",text:(0,C.jsx)(ie,{data:y})},{id:"3",title:xe("Container"),icon:"mdi dripicons-stack",text:(0,C.jsx)(ce,{customer_name:ee,endpointsId:te,containersInfo:X})},{id:"5",title:xe("Uninstall"),icon:"mdi mdi-cog-outline",text:(0,C.jsx)(he,{data:y,ref:q,disabledButton:function(){p(!0),o(!0)},enableButton:function(){p(!1),o(!1)},onDataChange:e.onDataChange,onCloseFatherModal:e.onClose})}];return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(h.Z,{show:e.showFlag,backdrop:"static",onHide:e.onClose,size:"lg",scrollable:"true",dialogClassName:"modal-full-width",children:[(0,C.jsx)(h.Z.Header,{onHide:e.onClose,closeButton:!0,children:(0,C.jsxs)("div",{style:{padding:"10px",display:"flex",width:"100%",alignItems:"center"},children:[(0,C.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,C.jsx)("img",{src:"./static/logos/".concat(y.app_name,"-websoft9.png"),alt:y.app_name,className:"app-icon",onError:function(e){return e.target.src=w}})}),(0,C.jsxs)("div",{className:"col-same-height",children:[(0,C.jsx)("h4",{className:"appstore-item-content-title",style:{marginTop:"5px"},children:y.customer_name}),(0,C.jsx)("h5",{className:"appstore-item-content-title",style:{marginTop:"5px"},children:y.status})]}),(0,C.jsxs)("div",{className:"col-same-height",style:{flexGrow:1,display:"flex",justifyContent:"flex-end",alignItems:"center"},children:["exited"===y.status&&(0,C.jsx)(L.Z,{placement:"bottom",overlay:(0,C.jsx)(W.Z,{id:"tooltip-bottom",children:xe("Start App")}),children:(0,C.jsx)(x.Z,{variant:"primary",disabled:u,style:{padding:"5px 10px",borderRadius:"3px",marginRight:"10px"},onClick:(0,s.Z)((0,t.Z)().mark((function n(){var a;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Ce(),D(!0),o(!0),n.prev=3,n.next=6,J({app_id:y.app_id});case 6:a=n.sent,(a=JSON.parse(a)).Error?T("/error"):(e.onDataChange(),ke()),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),T("/error-500");case 14:return n.prev=14,Se(),D(!1),o(!1),n.finish(14);case 19:case"end":return n.stop()}}),n,null,[[3,11,14,19]])}))),children:_?(0,C.jsx)(F,{className:"spinner-border-sm noti-icon",color:"light"}):(0,C.jsx)("i",{className:"dripicons-media-play noti-icon"})})},"bottom1"),"running"===y.status&&(0,C.jsx)(L.Z,{placement:"bottom",overlay:(0,C.jsx)(W.Z,{id:"tooltip-bottom",children:xe("Stop App")}),children:(0,C.jsx)(x.Z,{variant:"primary",disabled:u,style:{padding:"5px 10px",borderRadius:"3px",marginRight:"10px"},onClick:(0,s.Z)((0,t.Z)().mark((function n(){var a;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Ce(),R(!0),o(!0),n.prev=3,n.next=6,M({app_id:y.app_id});case 6:a=n.sent,(a=JSON.parse(a)).Error?T("/error"):(e.onDataChange(),ke()),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),T("/error-500");case 14:return n.prev=14,Se(),R(!1),o(!1),n.finish(14);case 19:case"end":return n.stop()}}),n,null,[[3,11,14,19]])}))),children:A?(0,C.jsx)(F,{className:"spinner-border-sm noti-icon",color:"light"}):(0,C.jsx)("i",{className:"dripicons-power noti-icon"})})},"bottom2"),(0,C.jsx)(L.Z,{placement:"bottom",overlay:(0,C.jsx)(W.Z,{id:"tooltip-bottom",children:xe("Restart App")}),children:(0,C.jsx)(x.Z,{disabled:i,style:{padding:"5px 10px",borderRadius:"3px",marginRight:"10px"},onClick:(0,s.Z)((0,t.Z)().mark((function n(){var a;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,Ce(),z(!0),p(!0),n.next=6,V({app_id:y.app_id});case 6:a=n.sent,(a=JSON.parse(a)).Error?T("/error"):(e.onDataChange(),ke()),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),T("/error-500");case 14:return n.prev=14,Se(),z(!1),p(!1),n.finish(14);case 19:case"end":return n.stop()}}),n,null,[[0,11,14,19]])}))),children:H?(0,C.jsx)(F,{className:"spinner-border-sm noti-icon",color:"light"}):(0,C.jsx)("i",{className:"dripicons-clockwise noti-icon"})})},"bottom3"),(0,C.jsx)(L.Z,{placement:"bottom",overlay:(0,C.jsx)(W.Z,{id:"tooltip-bottom",children:xe("Documentation")}),children:(0,C.jsxs)("a",{href:"https://support.websoft9.com/docs/"+y.app_name,style:{color:"#fff",backgroundColor:"#727cf5",padding:"5px 10px",borderRadius:"3px",borderColor:"#727cf5",marginRight:"10px"},target:"_blank",children:[(0,C.jsx)("i",{className:"dripicons-document noti-icon"})," "]})},"bottom5")]})]})}),(0,C.jsx)(h.Z.Body,{className:"row",children:(0,C.jsxs)(G.Z.Container,{defaultActiveKey:xe("Overview"),children:[(0,C.jsx)(v.Z,{sm:2,className:"mb-2 mb-sm-0",children:(0,C.jsx)($.Z,{variant:"pills",className:"flex-column",children:_e.map((function(e,n){return(0,C.jsx)($.Z.Item,{children:(0,C.jsxs)($.Z.Link,{as:b.rU,to:"#",eventKey:e.title,children:[(0,C.jsx)("i",{className:d()(e.icon,"d-md-none","d-block","me-1")}),(0,C.jsx)("span",{className:"d-none d-md-block",children:e.title})]})},n)}))})}),(0,C.jsx)(v.Z,{sm:10,children:(0,C.jsx)(G.Z.Content,{style:{height:"100%"},children:_e.map((function(e,n){return(0,C.jsx)(G.Z.Pane,{eventKey:e.title,id:e.id,style:{height:"100%"},children:(0,C.jsx)(j.Z,{style:{height:"100%"},children:(0,C.jsx)(v.Z,{sm:"12",children:e.text})})},n)}))})})]})})]})})},je=p().gettext,ve=m.forwardRef((function(e,n){return(0,C.jsx)(o.Z,(0,i.Z)({elevation:6,ref:n,variant:"filled"},e))})),ge=function(e){return(0,C.jsxs)(h.Z,{show:e.showConform,onHide:e.onClose,size:"lg",scrollable:"true",backdrop:"static",children:[(0,C.jsx)(h.Z.Header,{onHide:e.onClose,closeButton:!0,className:d()("modal-colored-header","bg-danger"),children:(0,C.jsxs)("h4",{children:[je("This is the error message for")," ",e.app.customer_name]})}),(0,C.jsx)(h.Z.Body,{className:"row",children:e.app.status_reason&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("span",{style:{margin:"10px 0px"},children:[" ",(0,C.jsx)("b",{children:je("Code: ")}),e.app.status_reason.Code," "]}),(0,C.jsxs)("span",{style:{margin:"10px 0px"},children:[" ",(0,C.jsx)("b",{children:je("Message: ")}),e.app.status_reason.Message," "]}),(0,C.jsxs)("span",{style:{margin:"10px 0px"},children:[" ",(0,C.jsx)("b",{children:je("Detail: ")}),e.app.status_reason.Detail," "]})]})}),(0,C.jsxs)(h.Z.Footer,{children:[(0,C.jsx)(x.Z,{variant:"light",onClick:e.onClose,children:je("Close")}),(0,C.jsx)(x.Z,{variant:"light",onClick:function(){return window.open("https://www.websoft9.com/ticket","_blank")},children:je("Support")})]})]})},Ze=function(e){var n=(0,Z.s0)(),a=(0,m.useState)(!1),i=(0,r.Z)(a,2),o=i[0],l=i[1],c=(0,m.useState)(!1),u=(0,r.Z)(c,2),p=u[0],j=u[1],v=(0,m.useState)(""),g=(0,r.Z)(v,2),b=g[0],w=g[1];return(0,C.jsxs)(h.Z,{show:e.showConform,onHide:e.onClose,size:"lg",scrollable:"true",backdrop:"static",children:[(0,C.jsx)(h.Z.Header,{onHide:e.onClose,className:d()("modal-colored-header","bg-warning"),children:(0,C.jsxs)("h4",{children:[je("Remove")," ",e.app.customer_name]})}),(0,C.jsxs)(h.Z.Body,{className:"row",children:[(0,C.jsxs)("span",{style:{margin:"10px 0px"},children:[je("This will immediately remove")," ",e.app.customer_name," ",je("and remove all its data.")]}),(0,C.jsx)("div",{children:p&&(0,C.jsx)(f.Z,{variant:"danger",className:"my-2",children:b})})]}),(0,C.jsxs)(h.Z.Footer,{children:[(0,C.jsx)(x.Z,{variant:"light",onClick:e.onClose,children:je("Close")})," ",(0,C.jsxs)(x.Z,{disabled:o,variant:"warning",onClick:(0,s.Z)((0,t.Z)().mark((function a(){var s;return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l(!0),a.next=4,z({app_id:e.app.app_id});case 4:s=a.sent,(s=JSON.parse(s)).Error?(j(!0),w(s.Error.Message)):(e.onClose(),e.onDataChange()),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n("/error-500");case 12:case"end":return a.stop()}}),a,null,[[0,9]])}))),children:[o&&(0,C.jsx)(F,{className:"spinner-border-sm me-1",tag:"span",color:"white"})," ",je("Remove")]})]})]})},be=function(){var e,n=(0,m.useState)(!1),a=(0,r.Z)(n,2),i=a[0],o=a[1],c=(0,m.useState)(!1),u=(0,r.Z)(c,2),p=u[0],h=u[1],f=(0,m.useState)(!1),y=(0,r.Z)(f,2),N=y[0],k=y[1],S=(0,m.useState)(!1),_=(0,r.Z)(S,2),E=(_[0],_[1],(0,m.useState)(!1)),I=(0,r.Z)(E,2),A=I[0],R=I[1],B=(0,m.useState)(!1),O=(0,r.Z)(B,2),P=O[0],T=O[1],U=(0,m.useState)(""),L=(0,r.Z)(U,2),W=L[0],G=L[1],$=(0,m.useState)(""),q=(0,r.Z)($,2),K=q[0],Q=q[1],X=(0,m.useState)(null),Y=(0,r.Z)(X,2),ee=Y[0],ne=Y[1],ae=(0,m.useState)([]),te=(0,r.Z)(ae,2),se=te[0],re=te[1],ie=(0,m.useState)([]),oe=(0,r.Z)(ie,2),le=(oe[0],oe[1],(0,m.useState)("")),ce=(0,r.Z)(le,2),de=ce[0],ue=ce[1],pe=(0,m.useState)("all"),me=(0,r.Z)(pe,2),he=me[0],xe=me[1],be=(0,m.useState)([]),we=(0,r.Z)(be,2),ye=(we[0],we[1],(0,m.useRef)(ee)),Ne=(0,Z.s0)(),ke=(0,m.useState)(0),Ce=(0,r.Z)(ke,2),Se=Ce[0],_e=Ce[1],De=(0,m.useState)(null),Ee=(0,r.Z)(De,2),Ie=Ee[0],Ae=Ee[1],Fe=(0,m.useState)(null),Re=(0,r.Z)(Fe,2),Be=(Re[0],Re[1]),Oe=(0,m.useState)(!1),Pe=(0,r.Z)(Oe,2),He=Pe[0],ze=Pe[1],Me=function(){H().then((function(e){if((e=JSON.parse(e)).Error)_e(e.Error.Code),Ae(e.Error.Message),Be(e.Error.Details);else{var n=e.ResponseData;if(re(n),ye.current){var a=n.find((function(e){return e.app_id===ye.current.app_id}));ne(a)}}ze(!1)})).catch((function(e){Z.Fg}))};if((0,m.useEffect)((function(){Me()}),[]),(0,m.useEffect)((function(){ze(!0),e=setInterval((function(){H().then((function(e){if((e=JSON.parse(e)).Error)_e(e.Error.Code),Ae(e.Error.Message),Be(e.Error.Details);else{var n=e.ResponseData;if(re(n),ye.current){var a=n.find((function(e){return e.app_id===ye.current.app_id}));ne(a)}}ze(!1)})).catch((function(e){Z.Fg}))}),5e3)}),[]),(0,m.useEffect)((function(){ye.current=ee}),[ee]),(0,m.useEffect)((function(){return function(){return clearInterval(e)}}),[]),He)return(0,C.jsx)(F,{className:"dis_mid"});if(Se)return(0,C.jsxs)("p",{children:["Code : $",Se," "]});if(Ie)return(0,C.jsxs)("p",{children:["Error : $",Ie," "]});var Je=function(e){"running"!==e.status&&"exited"!==e.status||(ne(e),o(!0))},Ve=function(e,n){"clickaway"!==n&&(T(!1),G(""))},Te=function(){Me()},Ue={Stop:{api:M},Start:{api:J},Restart:{api:V},Uninstall:{api:z}},Le=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n,a){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Uninstall"!==n){e.next=4;break}return ne(a),h(!0),e.abrupt("return");case 4:return R(!0),e.prev=5,e.next=8,Ue[n].api({app_id:a.app_id});case 8:s=e.sent,(s=JSON.parse(s)).Error?(T(!0),Q("error"),G(s.Error.Message)):(T(!0),Q("success"),G(je("Success")),Te()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),Ne("/error-500");case 16:return e.prev=16,R(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[5,13,16,19]])})));return function(n,a){return e.apply(this,arguments)}}();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(j.Z,{className:"mb-2 align-items-center",children:[(0,C.jsx)(v.Z,{xs:12,sm:6,md:3,lg:2,children:(0,C.jsx)("span",{style:{fontSize:"28px"},children:je("My Apps")})}),(0,C.jsx)(v.Z,{xs:12,sm:6,md:3,lg:2,children:(0,C.jsxs)(D,{value:he,name:"select",type:"select",className:"form-select",onChange:function(e){return function(e){xe(e)}(e.target.value)},children:[(0,C.jsx)("option",{value:"all",children:je("All States")}),(0,C.jsx)("option",{value:"installing",children:"installing"}),(0,C.jsx)("option",{value:"running",children:"running"}),(0,C.jsx)("option",{value:"exited",children:"exited"}),(0,C.jsx)("option",{value:"restarting",children:"restarting"}),(0,C.jsx)("option",{value:"failed",children:"failed"})]},"select")}),(0,C.jsx)(v.Z,{xs:12,sm:12,md:6,lg:7,children:(0,C.jsx)(D,{type:"text",name:"search",placeholder:je("Search for apps like WordPress, MySQL, GitLab, \u2026"),onChange:function(e){return function(e){ue(e)}(e.target.value)}})}),(0,C.jsx)(v.Z,{xs:12,sm:12,md:12,lg:1,children:(0,C.jsx)(x.Z,{variant:"primary",className:"float-end",onClick:function(){window.location.reload(!0)},children:je("Refresh")})})]}),[!0,!1].map((function(e){var n=se.filter((function(e){return"all"===he||e.status===he})).filter((function(n){return n.official_app===e})).filter((function(e){return e.customer_name.includes(de)}));return n.length>0?(0,C.jsxs)(j.Z,{children:[(0,C.jsx)("h4",{style:e?{}:{paddingTop:"10px"},children:je(e?"Websoft9's Apps":"Other Apps")}),n.map((function(n,a){return(0,C.jsx)(v.Z,{xxl:2,md:3,className:"appstore-item",children:(0,C.jsxs)("div",{className:"appstore-item-content highlight text-align-center",onClick:function(){Je(n)},children:[!e&&("running"===n.status||"exited"===n.status)&&(0,C.jsxs)(g.Z,{className:"float-end",children:[(0,C.jsx)(g.Z.Toggle,{as:b.rU,to:"#",className:"arrow-none card-drop",children:A?(0,C.jsx)(F,{className:"spinner-border-sm noti-icon"}):(0,C.jsx)("i",{className:"dripicons-gear noti-icon"})}),(0,C.jsx)(g.Z.Menu,{align:"end",children:(t=n.status,[{label:"Stop",icon:"dripicons-power noti-icon",condition:"running"===t},{label:"Start",icon:"dripicons-media-play noti-icon",condition:"exited"===t},{label:"Restart",icon:"dripicons-clockwise noti-icon",condition:"running"===t||"exited"===t},{label:"Uninstall",icon:"dripicons-trash noti-icon",variant:"text-danger",hasDivider:!0,condition:!0}]||[]).map((function(e,a){return(0,C.jsxs)(m.Fragment,{children:[e.condition&&e.hasDivider&&(0,C.jsx)(g.Z.Divider,{as:"div"}),e.condition&&(0,C.jsxs)(g.Z.Item,{className:d()(e.variant?e.variant:""),onClick:function(){return Le(e.label,n)},children:[e.icon&&(0,C.jsx)("i",{className:d()(e.icon,"me-1")}),e.label]})]},a)}))})]}),e&&("running"===n.status||"exited"===n.status)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"float-end arrow-none card-drop p-0",onClick:function(){Je(n)},children:(0,C.jsx)("i",{className:"dripicons-gear noti-icon"})}),(0,C.jsx)("div",{className:"clearfix"})]}),e&&"installing"===n.status&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"float-end arrow-none card-drop p-0",children:(0,C.jsx)("i",{className:"dripicons-empty noti-icon"})}),(0,C.jsx)("div",{className:"clearfix"})]}),"failed"===n.status&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"float-end arrow-none card-drop p-0",children:[(0,C.jsx)("i",{className:"dripicons-information noti-icon",style:{paddingRight:"10px"},onClick:function(){!function(e){ne(e),k(!0)}(n)}}),(0,C.jsx)("i",{className:"dripicons-trash noti-icon",onClick:function(){!function(e){ne(e),h(!0)}(n)}})]}),(0,C.jsx)("div",{className:"clearfix"})]}),(0,C.jsx)("div",{children:(0,C.jsx)("img",{src:"./static/logos/".concat(n.app_name,"-websoft9.png"),alt:n.app_name,className:"app-icon",style:{margin:"20px 10px 20px 10px"},onError:function(e){return e.target.src=w}})}),(0,C.jsxs)("div",{children:[(0,C.jsx)("h3",{className:"appstore-item-content-title",style:{color:"#2196f3"},children:n.customer_name}),(0,C.jsxs)("div",{style:{color:"failed"===n.status?"red":"inherit",display:"flex",alignItems:"center",justifyContent:"center"},children:[n.status&&"installing"===n.status&&(0,C.jsx)(F,{className:"spinner-border-sm m-2"})," ",(0,C.jsx)("div",{className:"m-2",children:n.status})]})]})]})},n.app_id+a);var t}))]}):null})),i&&(0,C.jsx)(fe,{current_app:ee,showFlag:i,onClose:function(){o(!1),ne(null)},onDataChange:Te}),p&&(0,C.jsx)(Ze,{showConform:p,onClose:function(){h(!1)},app:ee,onDataChange:Te}),N&&(0,C.jsx)(ge,{showConform:N,onClose:function(){k(!1)},app:ee}),P&&(0,C.jsx)(l.Z,{open:P,autoHideDuration:5e3,onClose:Ve,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,C.jsx)(ve,{onClose:Ve,severity:K,sx:{width:"100%"},children:W})})]})}}}]);
//# sourceMappingURL=811.b4391c8c.chunk.js.map